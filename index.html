<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CSS Tools & Equipment Guides</title>

<!-- model-viewer (module) -->
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<!-- EmailJS SDK -->
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>

<style>
/* =======================
   BASIC RESET & VARIABLES
======================= */
* { box-sizing: border-box; margin:0; padding:0; font-family: Arial, sans-serif; }
body { background:#f4f4f9; color:#000; line-height:1.6; scroll-behavior: smooth; }
a { text-decoration:none; color:inherit; }
img { max-width:100%; display:block; }

/* NAVBAR */
.navbar {
    display:flex; justify-content: space-between; align-items:center;
    padding: 12px 18px; background: cyan; position: sticky; top:0; 
    z-index:1000;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}
.navbar .logo { font-size:1.25rem; font-weight:bold; color:#000; }

/* MENU DEFAULT (DESKTOP) */
.menu ul { display:flex; list-style:none; gap:12px; align-items:center; margin:0; padding:0; }
.menu ul li a { display:inline-block; padding:6px 10px; border-radius:6px; transition:0.18s; color:#000; }
.menu ul li a:hover { background:#00e5ff; color:#fff; }

/* HAMBURGER (MOBILE) */
.hamburger { width:30px; height:20px; display:none; flex-direction:column; justify-content:space-between; cursor:pointer; }
.hamburger span { height:3px; background:#000; border-radius:4px; transition:0.25s ease; display:block; }
.hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(5px,6px); }
.hamburger.open span:nth-child(2) { opacity:0; transform: translateX(-6px); }
.hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(6px,-6px); }

/* MOBILE MENU DROPDOWN */
@media (max-width: 768px) {
    .hamburger { display:flex; }
    .menu { width:100%; display:none; }
    .menu.active { display:block; }
    .menu ul { flex-direction:column; background: cyan; padding:12px 0; text-align:center; gap:12px; margin:0; }
    .menu ul li a { color:#000; padding:10px 15px; display:block; }
}

/* HERO */
.hero { text-align:center; padding:80px 16px; background: linear-gradient(120deg,#0f2027,#203a43,#2c5364); color:#fff; }
.hero h1 { font-size:2.2rem; margin-bottom:14px; color:#00e5ff; }
.hero p { font-size:1rem; max-width:700px; margin:0 auto 18px auto; }
.hero .cta-btn { display:inline-block; padding:10px 18px; background:#00e5ff; color:#111; border-radius:8px; font-weight:bold; transition:0.2s; }
.hero .cta-btn:hover { transform:scale(1.03); }

/* FEATURES */
.features { display:flex; flex-wrap:wrap; justify-content:center; gap:18px; padding:36px 16px; max-width:1200px; margin:0 auto; }
.feature-card { flex:1 1 260px; background:#fff; border-radius:12px; padding:18px; text-align:center; box-shadow:0 6px 18px rgba(0,0,0,0.08); transition: transform 0.18s; position:relative; min-width:220px; }
.feature-card:hover { transform: translateY(-6px); }
.feature-card h3 { color:#00e5ff; margin-bottom:10px; font-size:1.05rem; }
.feature-card p { font-size:0.95rem; color:#333; margin-bottom:14px; }

/* Speak button */
.feature-actions { display:flex; justify-content:center; gap:8px; }
.btn-speak {
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; background:#00e5ff; color:#fff; border-radius:8px; border:none; cursor:pointer;
  font-weight:600; font-size:0.9rem; transition:transform .12s;
}
.btn-speak:active { transform:scale(.98); }
.btn-speak[aria-pressed="true"] { box-shadow:0 0 0 4px rgba(0,229,255,0.12); }

/* Voice recognition (microphone) */
#voice-btn {
  position: fixed; left:18px; bottom:18px; z-index:20000;
  background: linear-gradient(45deg,#ff5f6d,#ffc371); color:#111; border:none; padding:12px 14px;
  border-radius:999px; box-shadow:0 8px 20px rgba(0,0,0,0.2); cursor:pointer; font-weight:700;
}
#voice-btn.listening { box-shadow:0 0 0 6px rgba(255,195,113,0.14); transform:scale(1.03); }
#transcript {
  position: fixed; left:18px; bottom:78px; z-index:20000; min-width:200px; max-width:320px;
  background: rgba(0,0,0,0.75); color:#fff; padding:10px 12px; border-radius:10px; font-size:0.95rem;
  box-shadow:0 10px 30px rgba(0,0,0,0.25); display:none; word-break:break-word;
}

/* MODELS */
.models-section { padding:36px 16px; max-width:1200px; margin:0 auto; }
.models-section h2 { text-align:center; color:#00e5ff; margin-bottom:20px; }
.model-wrapper { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; }
.model-card { background:#fff; border-radius:12px; padding:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08); width:280px; text-align:center; }
.model-card model-viewer { width:100%; height:220px; border-radius:8px; display:block; }
.model-label { font-weight:700; margin-top:8px; color:#00e5ff; }

/* CHAT / QR / FOOTER */
#chat-container { position:fixed; bottom:18px; right:18px; z-index:10000; font-family: 'Inter', sans-serif; }
#chat-button { background: linear-gradient(45deg, #00e5ff, #ff00ff); color:#111; padding:10px 14px; border-radius:40px; cursor:pointer; box-shadow:0 0 12px #00e5ff; }
#chat-box { display:none; width:300px; max-height:360px; background:#1a1a1a; color:#fff; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,0.25); flex-direction:column; overflow:hidden; margin-top:10px; }
#chat-header { background:#00e5ff; color:#111; padding:10px; font-weight:600; display:flex; justify-content:space-between; align-items:center; }
#chat-messages { padding:8px; flex:1; overflow:auto; }
#chat-input { width:100%; padding:10px; border:none; outline:none; border-top:1px solid #333; background:#222; color:#fff; }

#qr-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.7); z-index:3000; justify-content:center; align-items:center; }
#qr-modal-content { background:#061221; padding:18px; border-radius:10px; text-align:center; color:#fff; max-width:400px; width:92%; }
#qr-video { width:300px; height:300px; background:#000; margin:8px auto; border-radius:8px; }
#qr-msg { margin-top:8px; color:#ffb3b3; font-weight:700; }

/* Footer */
footer { text-align:center; padding:20px 12px; background:#111; color:#fff; margin-top:18px; }

/* Responsive tweaks */
@media (max-width: 768px) {
  .hero { padding:60px 12px; }
  .hero h1 { font-size:1.6rem; }
  .features { padding:24px 12px; gap:12px; }
  .feature-card { width:100%; max-width:420px; }
  .model-card { width:100%; max-width:420px; }
}
</style>
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">
    <div class="logo">BTVTEd-CSS Community</div>
    <div class="hamburger" id="hamburger" aria-label="Open menu" role="button" tabindex="0">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <nav class="menu" id="menu" aria-label="Main menu">
        <ul>
            <li><a href="#home">HOME</a></li>
            <li><a href="features.html" id="feature-link">FEATURES</a></li>
            <li><a href="#models">MODELS</a></li>
            <li><a href="about.html">ABOUT</a></li>
            <li><a href="blog.html">BLOG</a></li>
        </ul>
    </nav>
</div>

<!-- HERO SECTION -->
<section class="hero" id="home" aria-labelledby="hero-title">
    <h1 id="hero-title">Welcome to CSS Tools & Equipment Guides</h1>
    <p>Explore interactive 3D models of computer components and quick guides ‚Äî now with spoken descriptions for features.</p>
    <a href="#models" class="cta-btn">Explore 3D Models</a>
</section>

<!-- FEATURES -->
<section class="features" id="features" aria-labelledby="features-title">
    <h2 id="features-title" style="position:absolute;left:-9999px;top:auto;">Features</h2>
    <article class="feature-card" data-feature-text="Interactive 3D Models. Rotate and zoom to examine components from every angle.">
        <h3>Interactive 3D Models</h3>
        <p>Rotate, zoom and inspect realistic 3D models of motherboards, CPUs, and GPUs.</p>
        <div class="feature-actions">
            <button class="btn-speak" data-speaking="false" title="Speak feature" aria-pressed="false">üîä Speak</button>
            <a class="btn-speak" href="lp3.html" style="background:#111;color:#fff;text-decoration:none;padding:6px 10px;border-radius:8px;">See More</a>
        </div>
    </article>
    <article class="feature-card" data-feature-text="Definitions and guides that explain each part and how it works in a computer system.">
        <h3>Definitions & Guides</h3>
        <p>Learn what each part does and how to use or install it safely.</p>
        <div class="feature-actions">
            <button class="btn-speak" data-speaking="false" title="Speak feature" aria-pressed="false">üîä Speak</button>
            <a class="btn-speak" href="lp2.html" style="background:#111;color:#fff;text-decoration:none;padding:6px 10px;border-radius:8px;">See More</a>
        </div>
    </article>
    <article class="feature-card" data-feature-text="Mobile friendly layouts and tools so you can learn on the go from any device.">
        <h3>Mobile Friendly</h3>
        <p>Access guides and models from your phone with a layout optimized for small screens.</p>
        <div class="feature-actions">
            <button class="btn-speak" data-speaking="false" title="Speak feature" aria-pressed="false">üîä Speak</button>
            <a class="btn-speak" href="lp.html" style="background:#111;color:#fff;text-decoration:none;padding:6px 10px;border-radius:8px;">See More</a>
        </div>
    </article>
</section>

<!-- MODELS -->
<section class="models-section" id="models" aria-labelledby="models-title">
    <h2 id="models-title">Explore Components</h2>
    <div class="model-wrapper" role="list">
        <div class="model-card" role="listitem" aria-label="Motherboard model">
            <model-viewer src="rog_strix_x370-f_motherboard.glb" auto-rotate camera-controls alt="Motherboard 3D model"></model-viewer>
            <div class="model-label">Motherboard</div>
            <a href="lp3.html" style="display:inline-block;margin-top:8px;text-decoration:none;color:#00e5ff;">See More</a>
        </div>
        <div class="model-card" role="listitem" aria-label="CPU model">
            <model-viewer src="free_intel_cpu.glb" auto-rotate camera-controls alt="CPU 3D model"></model-viewer>
            <div class="model-label">CPU</div>
            <a href="lp2.html" style="display:inline-block;margin-top:8px;text-decoration:none;color:#00e5ff;">See More</a>
        </div>
        <div class="model-card" role="listitem" aria-label="GPU model">
            <model-viewer src="nvidia_geforce_rtx_3090_-_gpu.glb" auto-rotate camera-controls alt="GPU 3D model"></model-viewer>
            <div class="model-label">GPU</div>
            <a href="lp.html" style="display:inline-block;margin-top:8px;text-decoration:none;color:#00e5ff;">See More</a>
        </div>
    </div>
</section>

<!-- FOOTER -->
<footer>
    &copy; 2025 BTVTEd-CSS Community. All Rights Reserved.
</footer>

<!-- CHAT SUPPORT -->
<div id="chat-container" aria-hidden="false">
  <div id="chat-button" role="button" tabindex="0" aria-label="Open support chat">üí¨ Chat</div>
  <div id="chat-box" role="dialog" aria-label="Support chat window" aria-hidden="true">
    <div id="chat-header">Support Chat <span id="chat-close" role="button" tabindex="0">‚úñ</span></div>
    <div id="chat-messages" aria-live="polite"></div>
    <input type="text" id="chat-input" placeholder="Type a message..." aria-label="Chat input" />
  </div>
</div>

<!-- QR MODAL -->
<div id="qr-modal" role="dialog" aria-hidden="true">
  <div id="qr-modal-content">
    <h2 style="color:#00e5ff;">Scan QR Code</h2>
    <video id="qr-video" autoplay muted playsinline></video>
    <div id="qr-msg">Initializing camera...</div>
    <button id="qr-btn-close">Close</button>
  </div>
</div>

<script>
/* ========== EmailJS Init ========== */
try { if(window.emailjs) emailjs.init("YOUR_EMAILJS_USER_ID"); } catch(e){console.warn('EmailJS init failed:', e);}

/* ========== Mobile menu toggle ========== */
const hamburger = document.getElementById('hamburger');
const menu = document.getElementById('menu');
hamburger.addEventListener('click', () => {
  menu.classList.toggle('active');  
  hamburger.classList.toggle('open');
  hamburger.setAttribute('aria-expanded', hamburger.classList.contains('open')?'true':'false');
});
Array.from(menu.querySelectorAll('a')).forEach(link => {
  link.addEventListener('click', () => {
    if(menu.classList.contains('active')){
      menu.classList.remove('active'); hamburger.classList.remove('open'); hamburger.setAttribute('aria-expanded','false');
    }
  });
});

/* ========== Chat open/close ========== */
const chatButton = document.getElementById('chat-button');
const chatBox = document.getElementById('chat-box');
const chatClose = document.getElementById('chat-close');
const chatInput = document.getElementById('chat-input');
const chatMessages = document.getElementById('chat-messages');

/* Autofocus chat input on page load */
window.addEventListener('DOMContentLoaded', () => {
  chatInput.focus();
});

chatButton.addEventListener('click', () => {
  const isVisible = chatBox.style.display === 'flex';
  chatBox.style.display = isVisible ? 'none' : 'flex';
  chatBox.setAttribute('aria-hidden', isVisible ? 'true':'false');
  if(!isVisible){ chatBox.style.flexDirection='column'; chatInput.focus(); }
});
chatClose.addEventListener('click',()=>{chatBox.style.display='none'; chatBox.setAttribute('aria-hidden','true');});

chatInput.addEventListener('keypress', function(e){
  if(e.key==='Enter' && chatInput.value.trim()!==''){
    const userMsg=document.createElement('div'); userMsg.textContent="You: "+chatInput.value; chatMessages.appendChild(userMsg);
    if(window.emailjs) emailjs.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",{message:chatInput.value,to_email:"css.demo.web@gmail.com"}).catch(err=>console.warn('Email send failed', err));
    const reply=document.createElement('div'); reply.textContent="Support: Thank you for your message! We'll get back to you via email."; reply.style.color="#00e5ff"; chatMessages.appendChild(reply);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    chatInput.value='';
  }
});

/* ========== QR Scanner ========== */
import QrScanner from "https://unpkg.com/qr-scanner@1.4.2/qr-scanner.min.js";

/* ========== QR SCANNER ========== */
const featureLink = document.getElementById('feature-link');
const qrModal = document.getElementById('qr-modal');
const qrVideo = document.getElementById('qr-video');
const qrMsg = document.getElementById('qr-msg');
let qrScanner = null;
const REQUIRED_CODE = "AUTHORIZED_USER";

function openQRModal(){
  qrModal.style.display='flex';
  qrModal.setAttribute('aria-hidden','false');
  qrMsg.style.color='#00e5ff';
  qrMsg.textContent='Initializing camera...';

  // Destroy previous scanner if exists
  if(qrScanner){ qrScanner.destroy(); qrScanner=null; }

  // Initialize QR scanner with autofocus
  qrScanner = new QrScanner(qrVideo, result => {
    if(!result) return;
    const scanned = String(result).trim();
    if(scanned === REQUIRED_CODE){
      qrMsg.style.color='#bfffcf';
      qrMsg.textContent='QR accepted ‚Äî Access granted! Redirecting...';
      try{ qrScanner.stop(); }catch(e){}
      setTimeout(()=> closeQRModal(true), 350);
    } else {
      qrMsg.style.color='#ffb3b3';
      qrMsg.textContent='Unauthorized QR. Try again.';
    }
  }, {
    highlightScanRegion: true,       // Highlights the scanning area
    highlightCodeOutline: true,      // Highlights detected QR code
    preferredCamera: 'environment'   // Uses back camera on mobile devices
  });

  // Start scanner
  qrScanner.start()
    .then(() => { qrMsg.textContent='Scan the QR code now'; })
    .catch(err => { 
      qrMsg.style.color='#ffb3b3'; 
      qrMsg.textContent='Camera not accessible.'; 
    });
}

// Close modal function
function closeQRModal(success=false){
  try{ qrScanner && qrScanner.stop(); qrScanner && qrScanner.destroy(); }catch(e){}
  qrScanner = null;
  qrModal.style.display='none';
  qrModal.setAttribute('aria-hidden','true');
  if(success){ window.location.href='features.html'; }
}

// Trigger modal and scanner on click
featureLink.addEventListener('click', e => {
  e.preventDefault();
  openQRModal();
});
</script>

<!-- Additional EmailJS Script -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script type="text/javascript">
   (function(){
      emailjs.init({
        publicKey: "YOUR_PUBLIC_KEY",
      });
   })();
</script>

<!-- Voice Recognition Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Insert voice UI elements
  const voiceBtnMarkup = '<button id="voice-btn" aria-pressed="false" title="Start voice recognition">üéôÔ∏è Start Listening</button><div id="transcript" role="status" aria-live="polite"></div>';
  document.body.insertAdjacentHTML('beforeend', voiceBtnMarkup);

  const voiceBtn = document.getElementById('voice-btn');
  const transcriptEl = document.getElementById('transcript');
  const chatInputEl = document.getElementById('chat-input');

  console.log('[Voice] Setup started. Button:', !!voiceBtn, 'Transcript:', !!transcriptEl);

  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  
  if (!SpeechRecognition) {
    console.warn('[Voice] SpeechRecognition not supported');
    voiceBtn.addEventListener('click', () => {
      transcriptEl.style.display = 'block';
      transcriptEl.textContent = 'Voice recognition not supported. Use Chrome or Edge.';
      setTimeout(() => { transcriptEl.style.display = 'none'; }, 4000);
    });
  } else {
    console.log('[Voice] SpeechRecognition available');
    const recognizer = new SpeechRecognition();
    recognizer.continuous = false;
    recognizer.interimResults = true;
    recognizer.lang = 'en-US';

    let isListening = false;
    let finalTranscript = '';

    recognizer.addEventListener('start', () => {
      console.log('[Voice] Start event fired');
      isListening = true;
      finalTranscript = '';
      voiceBtn.classList.add('listening');
      voiceBtn.setAttribute('aria-pressed', 'true');
      voiceBtn.textContent = 'üéôÔ∏è Listening...';
      transcriptEl.style.display = 'block';
      transcriptEl.textContent = 'Listening...';
    });

    recognizer.addEventListener('result', (event) => {
      console.log('[Voice] Result event, isFinal:', event.results[event.results.length - 1].isFinal);
      let interim = '';
      for (let i = event.resultIndex; i < event.results.length; i++) {
        const transcript = event.results[i][0].transcript;
        if (event.results[i].isFinal) {
          finalTranscript += transcript + ' ';
        } else {
          interim += transcript;
        }
      }
      transcriptEl.textContent = finalTranscript + (interim ? ' (' + interim + ')' : '');
      if (chatInputEl && finalTranscript.trim()) {
        chatInputEl.value = finalTranscript.trim();
      }
    });

    // Handle voice commands
    recognizer.addEventListener('end', function handleCommands() {
      const command = finalTranscript.toLowerCase().trim();
      console.log('[Voice] Processing command:', command);

      // Helper function for voice feedback
      function speakFeedback(message) {
        try {
          window.speechSynthesis.cancel(); // Clear any previous speech
          const utterance = new SpeechSynthesisUtterance(message);
          utterance.rate = 0.95;
          utterance.volume = 1.0;
          utterance.pitch = 1.0;
          console.log('[Voice] Speaking feedback:', message);
          
          utterance.onstart = () => console.log('[Voice] Speech started');
          utterance.onend = () => console.log('[Voice] Speech ended');
          utterance.onerror = (e) => console.error('[Voice] Speech error:', e);
          
          window.speechSynthesis.speak(utterance);
        } catch (e) {
          console.error('[Voice] Feedback error:', e);
        }
      }

      // Navigation commands
      if (command.includes('home')) {
        window.location.hash = '#home';
        transcriptEl.textContent = '‚úì Going to home';
        speakFeedback('Going to home page');
      } else if (command.includes('feature') || command.includes('features')) {
        window.location.href = 'features.html';
        transcriptEl.textContent = '‚úì Opening features';
        speakFeedback('Opening features page');
      } else if (command.includes('model') || command.includes('explore')) {
        window.location.hash = '#models';
        transcriptEl.textContent = '‚úì Going to models';
        speakFeedback('Going to models section');
      } else if (command.includes('about')) {
        window.location.href = 'about.html';
        transcriptEl.textContent = '‚úì Opening about';
        speakFeedback('Opening about page');
      } else if (command.includes('blog')) {
        window.location.href = 'blog.html';
        transcriptEl.textContent = '‚úì Opening blog';
        speakFeedback('Opening blog page');
      }
      // Chat commands
      else if (command.includes('chat') || command.includes('support')) {
        chatButton.click();
        transcriptEl.textContent = '‚úì Opening chat';
        speakFeedback('Opening support chat');
      } else if (command.includes('send') && chatInputEl.value) {
        chatInput.dispatchEvent(new KeyboardEvent('keypress', { key: 'Enter' }));
        transcriptEl.textContent = '‚úì Message sent';
        speakFeedback('Message sent successfully');
      }
      // Scroll commands
      else if (command.includes('scroll down')) {
        window.scrollBy(0, 300);
        transcriptEl.textContent = '‚úì Scrolling down';
        speakFeedback('Scrolling down');
      } else if (command.includes('scroll up')) {
        window.scrollBy(0, -300);
        transcriptEl.textContent = '‚úì Scrolling up';
        speakFeedback('Scrolling up');
      } else if (command.includes('scroll') && command.includes('top')) {
        window.scrollTo(0, 0);
        transcriptEl.textContent = '‚úì Scrolling to top';
        speakFeedback('Scrolling to top');
      }
      // Info commands
      else if (command.includes('refresh') || command.includes('reload')) {
        speakFeedback('Refreshing page');
        setTimeout(() => location.reload(), 500);
        transcriptEl.textContent = '‚úì Refreshing page';
      } else if (finalTranscript.trim() && !command.includes('error')) {
        transcriptEl.textContent = '‚úì Text added to input';
        speakFeedback('Text added to chat input');
      }
      
      // Reset and hide transcript
      isListening = false;
      voiceBtn.classList.remove('listening');
      voiceBtn.setAttribute('aria-pressed', 'false');
      voiceBtn.textContent = 'üéôÔ∏è Listening Enabled (Auto)';
      setTimeout(() => { transcriptEl.style.display = 'none'; }, 2500);
    });

    recognizer.addEventListener('error', (event) => {
      console.error('[Voice] Error:', event.error);
      transcriptEl.style.display = 'block';
      transcriptEl.textContent = 'Error: ' + event.error;
      setTimeout(() => { transcriptEl.style.display = 'none'; }, 3000);
    });

    // Auto-start voice recognition when page loads (for accessibility)
    function autoStartVoiceRecognition() {
      console.log('[Voice] Auto-starting recognition for accessibility');
      if (!isListening) {
        finalTranscript = '';
        try {
          recognizer.start();
          // Speak notification that listening has started
          setTimeout(() => {
            const utterance = new SpeechSynthesisUtterance('Voice recognition started. You can now speak your commands.');
            utterance.rate = 0.9;
            utterance.volume = 1.0;
            utterance.pitch = 1.0;
            console.log('[Voice] Speaking: Voice recognition started');
            window.speechSynthesis.cancel(); // Cancel any pending speech
            window.speechSynthesis.speak(utterance);
          }, 300);
        } catch (e) {
          console.error('[Voice] Auto-start error:', e);
        }
      }
    }

    // Start listening automatically after a short delay
    setTimeout(autoStartVoiceRecognition, 800);

    voiceBtn.addEventListener('click', () => {
      console.log('[Voice] Button clicked. isListening:', isListening);
      if (!isListening) {
        finalTranscript = '';
        try {
          recognizer.start();
        } catch (e) {
          console.error('[Voice] Start error:', e);
        }
      } else {
        recognizer.stop();
      }
    });

    // Allow voice commands to restart recognition automatically
    recognizer.addEventListener('end', function autoRestart() {
      console.log('[Voice] Auto-restarting recognition...');
      setTimeout(() => {
        if (!isListening) {
          finalTranscript = '';
          try {
            recognizer.start();
          } catch (e) {
            console.error('[Voice] Auto-restart error:', e);
          }
        }
      }, 1000);
    });

    console.log('[Voice] All setup complete - Auto-start enabled for accessibility');
  }
});
</script>

</body>
</html>
